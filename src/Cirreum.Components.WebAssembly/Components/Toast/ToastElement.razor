@namespace Cirreum.Components
@inherits BaseAfterRenderComponent

<div class="@ToastClass"
	 style="@ToastTypeStyle"
	 @onclick="ToastClick"
	 @onmouseover="TryPauseCountdown"
	 @onmouseout="TryResumeCountdown"
	 role="alert"
	 aria-live="assertive"
	 aria-atomic="true">
	<div class="toast-header">
		<div class="toast-title" style="@ToastTypeTitleStyle">
			@CurrentTitle
		</div>
		<div class="toaster-right-section">
			@if (CurrentSubtitle.HasValue()) {
				<small class="text-body-secondary text-truncate">
					@CurrentSubtitle
				</small>
			}
			@if (Options.ShowCopyToClipboard.ValueOrFalse() && HasRenderedMessage) {
				<div class="toast-copy-clipboard">
					<CopyToClipboardButton Text="@RenderedMessageString"
										   ButtonColor="@MapButtonColorFromToastType"
										   ButtonCss="border-0"
										   ShowLabel="false" />
				</div>
			}
			@if (Options.DisableTimeout.ValueOrFalse() || Options.ShowCloseButton.ValueOrFalse()) {
				<button type="button" class="@Options.CloseButtonCss" aria-label="Close" @onclick="Close" />
			}
		</div>
	</div>
	<div class="toast-body">
		<span id="@MessageId" class="@Options.ToastMessageCss">
			@if (HasMessageFragment) {
				@MessageFragment
			} else if (Options.Instance?.ContentType is not null) {
				<CascadingValue Value="this" IsFixed="true">
					<DynamicComponent Type="Options.Instance.ContentType" Parameters="Options.Instance.GetParameters()" />
				</CascadingValue>
			}
		</span>
	</div>

	@if (Options.ShowProgressBar.ValueOrFalse()) {
		<div class="toast-progressbar">
			<span style="width: @(Options.Progress)%;"></span>
		</div>
	}

</div>